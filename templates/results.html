<!DOCTYPE html>
<head>
    <title>Resultado de super-armador de grupos</title>
    <meta charset="utf-8">
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/pure.min.css') }}">
</head>
<body>
<div class="pure-g">
    <div class="pure-u-5-5">
        <h2>Datos de entrada:</h2>

        <ul>
            <li><b>Personas por grupo: </b> {{ genetic_class.persons_per_group }} </li>
            <li><b>Número de personas: </b> {{ person_class.number_of_persons() }} </li>
            <li><b>Número de grupos: </b> {{ genetic_class.number_of_sub_groups() }} </li>
        </ul>

        <table class="pure-table pure-table-bordered pure-table-striped">
            <thead>
            <tr>
                <th>#</th>
                <th>Nombre</th>
                <th>Primera preferencia</th>
                <th>Segunda preferencia</th>
                <th>Primera de-preferencia</th>
                <th>Segunda de-preferencia</th>
            </tr>
            </thead>
            <tbody>
            {% for idx in range(0, person_class.number_of_persons()) %}
                {% set person = person_class.persons[idx] %}
                {% set pref_key = person_class.INDEX_PREFERENCES %}
                <tr>
                    <td> {{ idx }}</td>
                    <td> {{ person[person_class.INDEX_NAME] }} </td>
                    {% for preference_idx in person_class.INDEXES_PREFERENCES %}
                        {% set prefered_person_id = person[pref_key][preference_idx] %}
                        <td> {{ person_class.get_name_from_person_id(prefered_person_id) }} </td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>


<p>&nbsp;</p>
<p>&nbsp;</p>

<h1>Output:</h1>

<h3> Solution score: <b> 12 </b></h3>
<form class="pure-form pure-form-aligned"
    action="download"
    method="POST"
>
    <input type="hidden" name="parsed_groups" value="{{parsed_groups}}">
    <button type="submit" class="pure-button button-secondary">⬇️ Download Excel</button>
</form>

<div class="pure-g">
    {% for group in groups %}
         <div class="pure-u-1-3">
            <h2>Group {{ loop.index  }}  </h2>
            <table class="pure-table pure-table-bordered pure-table-striped">
                <thead>
                <tr>
                    <th>Student</th>
                    <th>Score</th>
                </tr>
                <tbody>
                {% for student_data in group['rows'] %}
                    <tr>
                        <td> {{ student_data['name'] }} </td>
                        <td> {{ student_data['score'] }} </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <p><b>Puntaje grupo:</b> {{ group['group_score'] }} </p>
        </div>
    {% endfor %}
</div>

</body>
</html>